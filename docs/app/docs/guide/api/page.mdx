import { compileMdx } from 'nextra/compile'
import { Callout } from 'nextra/components'
import { MDXRemote } from 'nextra/mdx-remote'
import { generateDocumentation, TSDoc } from 'nextra/tsdoc'

# API

export async function Section({ packageName, functionName }) {
  const { signatures, description, tags = {} } = generateDocumentation({
    code: `export { ${functionName} as default } from '${packageName}'`
  })
  const result = [`## \`${functionName}\``]
  if (description) result.push(description)
  result.push('<TSDoc definition={definition} />')
  if (tags.throws) {
    result.push(`<Callout type='warning'>
**Warning**
{''}
Throws an ${tags.throws.replaceAll('{', '`').replaceAll('}', '`')}
</Callout>`)
  }
  if (tags.see) {
    result.push(`<Callout>
**See**
{''}
${tags.see}
</Callout>`)
  }
  if (tags.example) {
    result.push(`### Example
{''}
${tags.example}`)
  }
  const rawJs = await compileMdx(result.join('\n\n'))
  return (
    <MDXRemote
      compiledSource={rawJs}
      components={{ TSDoc, Callout }}
      scope={{ definition: { signatures } }}
    />
  )
}

<Section functionName="getPageMap" packageName="nextra/page-map" />

<Section functionName="  generateStaticParamsFor" packageName="nextra/pages" />

<Section functionName="  importPage" packageName="nextra/pages" />
