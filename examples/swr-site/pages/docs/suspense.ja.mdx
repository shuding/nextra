import { Callout } from 'nextra-theme-docs'

# ã‚µã‚¹ãƒšãƒ³ã‚¹

<Callout emoji="ğŸš¨" type="error">
  ã‚µã‚¹ãƒšãƒ³ã‚¹ã¯ç¾åœ¨ã€React ã®<strong>å®Ÿé¨“çš„ãª</strong>æ©Ÿèƒ½ã§ã™ã€‚ã“ã‚Œã‚‰ã® API ã¯ã€React ã®ä¸€éƒ¨ã«ãªã‚‹å‰ã«ã€è­¦å‘Šãªã—ã«å¤§å¹…ã«å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚<br/>
  [è©³ã—ã„æƒ…å ±](https://reactjs.org/docs/concurrent-mode-suspense.html)
</Callout>

<Callout>
  React ã‚µã‚¹ãƒšãƒ³ã‚¹ã¯ SSR ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã¾ã ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
</Callout>

React ã‚µã‚¹ãƒšãƒ³ã‚¹ã§ SWR ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ `suspense` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚

```jsx
import { Suspense } from 'react'
import useSWR from 'swr'

function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })
  return <div>hello, {data.name}</div>
}

function App () {
  return (
    <Suspense fallback={<div>loading...</div>}>
      <Profile/>
    </Suspense>
  )
}
```

<Callout>
  `suspense` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«å†…ã§ã¯å¤‰æ›´ã§ããªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
</Callout>

ã‚µã‚¹ãƒšãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã§ã® `data` ã¯å¸¸ã«ãƒ•ã‚§ãƒƒãƒã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ã™ï¼ˆã‚ˆã£ã¦ `undefined` ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚
ãŸã ã—ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒƒãƒã™ã‚‹ãŸã‚ã«[ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼](https://reactjs.org/docs/concurrent-mode-suspense.html#handling-errors)ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```jsx
<ErrorBoundary fallback={<h2>Could not fetch posts.</h2>}>
  <Suspense fallback={<h1>Loading posts...</h1>}>
    <Profile />
  </Suspense>
</ErrorBoundary>
```

---

### æ³¨ï¼šæ¡ä»¶ä»˜ããƒ•ã‚§ãƒƒãƒã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ

é€šå¸¸ã€`suspense` ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã« `data` ãŒå¸¸ã«æº–å‚™ãŒã§ãã¦ã„ã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ï¼š

```jsx
function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })

  // `data` ã¯æ±ºã—ã¦ `undefined` ã«ã¯ãªã‚Šã¾ã›ã‚“
  // ...
}
```

ãŸã ã—ã€æ¡ä»¶ä»˜ããƒ•ã‚§ãƒƒãƒã¾ãŸã¯ä¾å­˜ãƒ•ã‚§ãƒƒãƒã¨ä¸€ç·’ã«ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒ**ä¸€æ™‚åœæ­¢**ã•ã‚ŒãŸå ´åˆã« `data` ã¯ `undefined` ãªã‚Šã¾ã™ï¼š

```jsx
function Profile () {
  const { data } = useSWR(isReady ? '/api/user' : null, fetcher, { suspense: true })

  // `isReady` ãŒ false ã®ã¨ãã«ã¯ `data` ã¯ `undefined` ã«ãªã‚Šã¾ã™
  // ...
}
```

ã“ã®åˆ¶é™ã«é–¢ã™ã‚‹æŠ€è¡“çš„ãªè©³ç´°ã‚’èª­ã¿ãŸã„å ´åˆã¯ã€[ã“ã¡ã‚‰ã®è­°è«–](https://github.com/vercel/swr/pull/357#issuecomment-627089889)ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
